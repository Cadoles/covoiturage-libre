- date_value = @trip.departure_date.present? ? @trip.departure_date.strftime('%d/%m/%Y') : ''
= simple_form_for @trip, html: { class: 'form-horizontal' } do |f|
  = f.error_notification
  .row
    .col-md-6

      .panel.panel-default
        .panel-heading
          %h3.panel-title Votre trajet
        .panel-body
          = f.input :departure_date, as: :string, wrapper: :horizontal_form, input_html: {value: date_value, class: 'datepicker' }, placeholder: 'Date'
          = f.input :departure_time, as: :time, wrapper: :horizontal_form, required: true, input_html: { style: 'display: initial; width: initial;' }, prompt: { hour: '', minute: '' }
          = f.simple_fields_for :points, @required_points do |p|
            = p.input :city, as: :string, wrapper: :horizontal_form, input_html: { class: 'geoname' }, placeholder: t(p.object.kind.downcase), label: t(p.object.kind.downcase+'_place'), required: true
            = p.input :lon, as: :hidden
            = p.input :lat, as: :hidden
            = p.input :kind, as: :hidden
          = f.input :price, wrapper: :horizontal_form, input_html: { min: '0', step: 'any' }
          = f.input :description, wrapper: :horizontal_form

      .panel.panel-default
        .panel-heading
          %h3.panel-title Optionnel : faites-vous des étapes ?
        .panel-body
          - i = 0
          = f.simple_fields_for :points, @optional_points do |p|
            - i += 1
            = p.input :city, as: :string, wrapper: :horizontal_form, input_html: { class: 'geoname' }, placeholder: t(p.object.kind.downcase), label: t(p.object.kind.downcase+'_place') + " #{i}"
            = p.input :lon, as: :hidden
            = p.input :lat, as: :hidden
            = p.input :kind, as: :hidden
            = p.input :rank, as: :hidden

    .col-md-6

      .panel.panel-default
        .panel-heading
          %h3.panel-title Vous
        .panel-body
          = f.input :title, as: :radio_buttons, wrapper: :horizontal_radio_and_checkboxes, item_label_class: 'radio-inline', collection: [['Homme', 'M'], ['Femme', 'F']], label: 'Vous êtes'
          = f.input :name, as: :string, wrapper: :horizontal_form
          = f.input :age, as: :string, wrapper: :horizontal_form, input_html: { min: '0', step: 'any' }
          = f.input :phone, as: :string, wrapper: :horizontal_form
          = f.input :email, as: :string, wrapper: :horizontal_form

      .panel.panel-default
        .panel-heading
          %h3.panel-title Votre véhicule
        .panel-body
          = f.input :seats, wrapper: :horizontal_form, input_html: { min: '0', step: 'any' }
          = f.input :comfort, wrapper: :horizontal_form, collection: Trip::CAR_RATINGS.map(&:to_sym)
          = f.input :smoking, as: :radio_buttons, wrapper: :horizontal_radio_and_checkboxes, item_label_class: 'radio-inline'


      .row
        .col-md-6
          -if @trip.new_record?
            %div{style: "padding-left: 15px;"}= f.input :terms_of_service, label: "Je valide les #{link_to('CGUs', '/cgus', target: '_blank')}".html_safe
        .col-md-6
          = f.button :submit, class: 'btn btn-primary btn-lg pull-right'

- content_for :javascript_footer do
  :javascript
    initAutocomplete()
    initDatepicker()
